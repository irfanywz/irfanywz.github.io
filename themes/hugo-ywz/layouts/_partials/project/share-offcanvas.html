<div 
    x-data
    x-show="$store.share.isOpen" 
    x-transition.opacity 
    @click="$store.share.close()" 
    class="fixed inset-0 bg-black/50 z-[60]" 
    style="display: none;">
</div>

<div 
    x-data
    x-show="$store.share.isOpen"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="translate-y-full md:opacity-0 md:scale-95 md:translate-y-0"
    x-transition:enter-end="translate-y-0 md:opacity-100 md:scale-100"
    x-transition:leave="transition ease-in duration-300"
    x-transition:leave-start="translate-y-0 md:opacity-100 md:scale-100"
    x-transition:leave-end="translate-y-full md:opacity-0 md:scale-95 md:translate-y-0"
    class="fixed bottom-0 left-0 right-0 md:top-1/2 md:left-1/2 md:bottom-auto md:w-[90%] md:max-w-[500px] md:-translate-x-1/2 md:-translate-y-1/2 bg-white dark:bg-gray-900 z-[70] rounded-t-2xl md:rounded-2xl shadow-2xl max-h-[80vh] flex flex-col" 
    role="dialog" aria-modal="true" aria-labelledby="share-offcanvas-title"
    style="display: none;">
    
    <div class="flex items-center justify-between p-6 border-b border-gray-100 dark:border-gray-800 flex-shrink-0">
        <h5 class="text-lg font-bold text-gray-900 dark:text-white" id="share-offcanvas-title">Bagikan Proyek Ini</h5>
        <button @click="$store.share.close()" type="button" class="p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors" aria-label="Tutup">
            <span class="icon-[ri--close-line] w-6 h-6"></span>
        </button>
    </div>
    <div class="p-6 overflow-y-auto">
        <div class="grid grid-cols-3 gap-4">
            <a href="https://twitter.com/intent/tweet?url={{ .Permalink }}&text={{ .Title | urlize }}" target="_blank" rel="noopener noreferrer" class="flex flex-col items-center justify-center gap-2 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 hover:-translate-y-1 transition-all text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400">
                <span class="icon-[ri--twitter-x-line] w-6 h-6"></span>
                <span>Twitter</span>
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u={{ .Permalink }}" target="_blank" rel="noopener noreferrer" class="flex flex-col items-center justify-center gap-2 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 hover:-translate-y-1 transition-all text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-500">
                <span class="icon-[ri--facebook-fill] w-6 h-6"></span>
                <span>Facebook</span>
            </a>
            <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ .Permalink }}&title={{ .Title | urlize }}" target="_blank" rel="noopener noreferrer" class="flex flex-col items-center justify-center gap-2 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 hover:-translate-y-1 transition-all text-gray-600 dark:text-gray-300 hover:text-blue-700 dark:hover:text-blue-600">
                <span class="icon-[ri--linkedin-fill] w-6 h-6"></span>
                <span>LinkedIn</span>
            </a>
            <a href="https://api.whatsapp.com/send?text={{ .Title | urlize }}%20{{ .Permalink }}" target="_blank" rel="noopener noreferrer" class="flex flex-col items-center justify-center gap-2 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 hover:-translate-y-1 transition-all text-gray-600 dark:text-gray-300 hover:text-green-600 dark:hover:text-green-500">
                <span class="icon-[ri--whatsapp-line] w-6 h-6"></span>
                <span>WhatsApp</span>
            </a>
            <a href="https://t.me/share/url?url={{ .Permalink }}&text={{ .Title | urlize }}" target="_blank" rel="noopener noreferrer" class="flex flex-col items-center justify-center gap-2 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 hover:-translate-y-1 transition-all text-gray-600 dark:text-gray-300 hover:text-blue-500 dark:hover:text-blue-400">
                <span class="icon-[ri--telegram-fill] w-6 h-6"></span>
                <span>Telegram</span>
            </a>
            <button 
                x-data="{ copied: false }"
                @click="navigator.clipboard.writeText('{{ .Permalink }}').then(() => { copied = true; setTimeout(() => copied = false, 1500) })"
                class="flex flex-col items-center justify-center gap-2 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 hover:-translate-y-1 transition-all text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400">
                <div x-show="!copied">
                    <span class="icon-[ri--link] w-6 h-6"></span>
                </div>
                <div x-show="copied" style="display: none;">
                    <span class="icon-[ri--check-line] w-6 h-6 text-green-500"></span>
                </div>
                <span x-text="copied ? 'Tersalin!' : 'Salin'">Salin</span>
            </button>
        </div>
    </div>
</div>