<!-- Table of Contents -->
{{ if .Page.Params.toc | default true }}
    {{ $headers := findRE "<h[2-6].*?>(.|\n])+?</h[2-6]>" .Content }}
    {{ if ge (len $headers) 1 }}
        <h3 class="text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider mb-4">Daftar Isi</h3>
        <ul class="space-y-2 text-sm">
            {{ range $i, $header := $headers }}
                {{ $headerLevel := index (findRE "[2-6]" $header 1) 0 }}
                {{ $headerLevel := int $headerLevel }}
                {{ $headerID := $header | replaceRE ".* id=\"([^\"]+)\".*" "$1" }}
                {{ if not $headerID }}
                    {{ $headerID = $header | plainify | anchorize }}
                {{ end }}
                {{ $headerText := $header | plainify | htmlUnescape }}
                
                {{ $padding := mul (sub $headerLevel 2) 12 }}

                <li>
                    <a href="#{{ $headerID }}" 
                       @click="activeSection = '{{ $headerID }}'; sidebarOpen = false"
                       :class="activeSection === '{{ $headerID }}' ? 'text-indigo-600 dark:text-indigo-400 font-medium' : 'text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400'"
                       class="block transition-colors" style="padding-left: {{ $padding }}px">
                        {{ $headerText }}
                    </a>
                </li>
            {{ end }}
        </ul>
    {{ end }}
{{ end }}